import{r as t,c as e,h as i,F as s,H as o,g as a}from"./p-80f0c69a.js";const n=class{constructor(o){t(this,o),this.componentLibraryAnalytics=e(this,"component-library-analytics",7),this.handleBlur=()=>{this.componentLibraryAnalytics.emit({componentName:"va-search-input",action:"blur",details:{value:this.value}}),this.formattedSuggestions.length&&(this.isListboxOpen=!1)},this.handleSubmit=()=>{this.inputRef.dispatchEvent(new SubmitEvent("submit",{bubbles:!0,cancelable:!0,composed:!0})),this.componentLibraryAnalytics.emit({componentName:"va-search-input",action:"click",details:{value:this.value}})},this.handleInput=t=>{this.value=t.target.value,this.suggestions&&this.updateSuggestions(this.suggestions)},this.handleInputFocus=()=>{this.formattedSuggestions.length&&!this.isListboxOpen&&(this.isListboxOpen=!0)},this.handleInputKeyDown=t=>{const e=this.el.shadowRoot.querySelectorAll('[role="option"]');switch(t.key){case"ArrowDown":if(t.preventDefault(),!(null==e?void 0:e.length))return;this.selectSuggestion(e[0]);break;case"ArrowUp":if(t.preventDefault(),!(null==e?void 0:e.length))return;this.selectSuggestion(e[e.length-1]);break;case"Enter":this.handleSubmit();break;case"Escape":this.inputRef.value="",this.inputRef.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0}));break;case"Tab":this.isListboxOpen=!1}},this.handleButtonClick=()=>{this.handleSubmit()},this.handleListboxClick=t=>{const e=this.el.shadowRoot.getElementById(`listbox-option-${t}`);this.inputRef.value=e.innerText,this.inputRef.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0})),this.inputRef.removeAttribute("aria-activedescendant"),this.isListboxOpen=!1,this.handleSubmit()},this.handleListboxKeyDown=(t,e)=>{const i=this.el.shadowRoot.querySelectorAll('[role="option"]');switch(t.key){case"ArrowUp":t.preventDefault(),this.selectSuggestion(0===e?i[i.length-1]:i[e-1]);break;case"ArrowDown":t.preventDefault(),this.selectSuggestion(e===i.length-1?i[0]:i[e+1]);break;case"Enter":this.inputRef.value=i[e].innerText,this.inputRef.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0})),this.inputRef.focus(),this.inputRef.removeAttribute("aria-activedescendant"),this.isListboxOpen=!1,this.handleSubmit();break;case"Escape":this.inputRef.value="",this.inputRef.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0})),this.inputRef.focus(),this.inputRef.removeAttribute("aria-activedescendant"),this.isListboxOpen=!1;break;case"Home":t.preventDefault(),this.inputRef.focus(),this.inputRef.setSelectionRange(0,0);break;case"ArrowRight":case"End":t.preventDefault(),this.inputRef.focus(),this.inputRef.setSelectionRange(this.inputRef.value.length+1,this.inputRef.value.length+1);break;case"ArrowLeft":t.preventDefault(),this.inputRef.focus(),this.inputRef.setSelectionRange(this.inputRef.value.length,this.inputRef.value.length);break;default:this.inputRef.focus()}},this.formatSuggestion=t=>{const e=t.toLowerCase(),o=this.inputRef.value.toLowerCase();return e.includes(o)?i(s,null,o,i("strong",null,e.replace(o,""))):i("strong",null,e)},this.selectSuggestion=t=>{const e=this.el.shadowRoot.querySelector('[aria-selected="true"]');null==e||e.removeAttribute("aria-selected"),t.focus(),t.setAttribute("aria-selected","true"),this.inputRef.setAttribute("aria-activedescendant",t.id)},this.updateSuggestions=t=>{if(!t.length)return this.formattedSuggestions=[],void(this.isListboxOpen=!1);this.formattedSuggestions=t.slice(0,5).sort().map((t=>this.formatSuggestion(t))),this.isListboxOpen=!0},this.formattedSuggestions=[],this.isListboxOpen=void 0,this.buttonText=void 0,this.label="Search",this.suggestions=void 0,this.value=""}componentDidLoad(){var t;Array.isArray(this.suggestions)&&(null===(t=this.suggestions)||void 0===t?void 0:t.length)&&this.updateSuggestions(this.suggestions)}watchValueHandler(){this.value=this.inputRef.value}watchSuggestionsHandler(t){Array.isArray(t)&&this.updateSuggestions(t)}render(){const{buttonText:t,formattedSuggestions:e,handleBlur:s,handleButtonClick:a,handleInput:n,handleInputFocus:r,handleInputKeyDown:l,handleListboxClick:h,handleListboxKeyDown:c,isListboxOpen:d,label:u,value:b}=this,p=e.length,v=p?"list":"none",g=p?"va-search-listbox":void 0,m=p?d?"true":"false":void 0,x=p?"listbox":void 0,f=p?"combobox":void 0,w=this.el.getAttribute("type")||"text";return i(o,{onBlur:s},i("input",{ref:t=>this.inputRef=t,id:"va-search-input","aria-autocomplete":v,"aria-controls":g,"aria-expanded":m,"aria-haspopup":x,"aria-label":u,autocomplete:"off",onFocus:r,onInput:n,onKeyDown:l,role:f,type:w,value:b}),i("button",{id:"va-search-button",type:"submit","aria-label":u,onClick:a},i("i",{"aria-hidden":"true",class:"fa fa-search"}),t&&i("span",{id:"va-search-button-text"},t)),d&&i("ul",{id:"va-search-listbox","aria-label":"Search Suggestions",role:"listbox"},e.map(((t,e)=>i("li",{id:`listbox-option-${e}`,class:"va-search-suggestion",onClick:()=>h(e),onKeyDown:t=>c(t,e),role:"option",tabIndex:-1},t)))))}get el(){return a(this)}static get watchers(){return{value:["watchValueHandler"],suggestions:["watchSuggestionsHandler"]}}};n.style="button:not([disabled]):focus,:host(:not([uswds])) button:not([disabled]):active,select:not([disabled]):focus,a:not([disabled]):focus,h1:focus,input:not([disabled]):focus,textarea:not([disabled]):focus,[role='option']:focus{outline:2px solid var(--color-gold-light);outline-offset:2px}button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;border-radius:5px;color:var(--color-white);cursor:pointer;display:inline-block;font-family:var(--font-source-sans);font-size:1.6rem;font-weight:700;line-height:1;padding:1rem 2rem;text-align:center;text-decoration:none}button:not([disabled]):focus,:host(:not([uswds])) button:not([disabled]):active,select:not([disabled]):focus,a:not([disabled]):focus,h1:focus,input:not([disabled]):focus,textarea:not([disabled]):focus,[role='option']:focus{outline:2px solid var(--color-gold-light);outline-offset:2px}input,select,textarea{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0.1rem solid var(--color-gray);border-radius:0;-webkit-box-sizing:border-box;box-sizing:border-box;color:var(--color-base);display:block;font-size:1.6rem;height:4.2rem;line-height:1.3;margin:0.2em 0;max-width:46rem;padding:1rem 0.7em;width:100%}:host{display:block;-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;position:relative}#va-search-input{border-color:var(--color-gray);display:inline-block;height:4.8rem;margin:0;max-width:none;min-width:24.8rem;padding:1.2rem 0.8rem}#va-search-input:focus{z-index:1}#va-search-button{-ms-flex-align:center;align-items:center;background-color:var(--color-primary);border-radius:0 3px 3px 0;display:-ms-flexbox;display:flex;height:4.8rem}#va-search-button:focus{z-index:1}#va-search-button:active,#va-search-button:hover{background-color:var(--color-primary-darker)}i::before{content:'\\F002';display:inline-block;font-family:'Font Awesome 5 Free';font-style:normal;font-variant:normal;font-weight:900;line-height:1;text-rendering:auto}#va-search-button-text{margin-left:0.4rem}#va-search-listbox{background-color:var(--color-white);-webkit-box-shadow:0px 2px 6px 1px rgba(20, 20, 20, 0.14);box-shadow:0px 2px 6px 1px rgba(20, 20, 20, 0.14);display:block;left:0;line-height:2.4rem;list-style-type:none;margin:0;padding:0;position:absolute;right:0;top:4.8rem}.va-search-suggestion{cursor:pointer;padding:0.8rem}.va-search-suggestion[aria-selected='true'],.va-search-suggestion:focus,.va-search-suggestion:hover{background-color:var(--color-primary);color:var(--color-white)}";export{n as va_search_input}